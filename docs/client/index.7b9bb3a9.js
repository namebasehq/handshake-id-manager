import{S as t,i as e,s as n,c as a,a as s,e as r,b as o,d as l,f as i,g as c,t as u,h as $,l as f,u as m,j as h,k as d,m as p,n as g,o as v,p as w,q as x,r as b,v as y,w as C,x as k,y as E,z as N,A as I,B as D,C as H,D as L,E as S,F as V,G as T,H as j,I as F,J as A,K as R,L as M,M as O,N as P,O as U,P as _,Q as B,R as q,T as Y}from"./client.007d0563.js";function Z(t){let e,n,g,v,w;const x=t[4].default,b=a(x,t,t[3],null);let y=[{class:n=t[2].class},t[2]],C={};for(let t=0;t<y.length;t+=1)C=s(C,y[t]);return{c(){e=r("div"),b&&b.c(),this.h()},l(t){e=o(t,"DIV",{class:!0});var n=l(e);b&&b.l(n),n.forEach(i),this.h()},h(){c(e,C),u(e,"svelte-txlu0g",!0)},m(n,a){$(n,e,a),b&&b.m(e,null),g=!0,v||(w=f(e,"click",t[5]),v=!0)},p(t,[a]){b&&b.p&&8&a&&m(b,x,t,t[3],a,null,null),c(e,C=h(y,[(!g||4&a&&n!==(n=t[2].class))&&{class:n},4&a&&t[2]])),u(e,"svelte-txlu0g",!0)},i(t){g||(d(b,t),g=!0)},o(t){p(b,t),g=!1},d(t){t&&i(e),b&&b.d(t),v=!1,w()}}}function J(t,e,n){let{$$slots:a={},$$scope:r}=e;const{goto:o}=g("router");let{to:l}=e;return t.$$set=t=>{n(2,e=s(s({},e),v(t))),"to"in t&&n(0,l=t.to),"$$scope"in t&&n(3,r=t.$$scope)},e=v(e),[l,o,e,r,a,()=>o(l)]}class z extends t{constructor(t){super(),e(this,t,J,Z,n,{to:0})}}function K(t){let e;const n=t[4].default,s=a(n,t,t[3],null);return{c(){s&&s.c()},l(t){s&&s.l(t)},m(t,n){s&&s.m(t,n),e=!0},p(t,e){s&&s.p&&8&e&&m(s,n,t,t[3],e,null,null)},i(t){e||(d(s,t),e=!0)},o(t){p(s,t),e=!1},d(t){s&&s.d(t)}}}function X(t){let e,n,a=t[0].substring(1)===t[1],s=a&&K(t);return{c(){s&&s.c(),e=w()},l(t){s&&s.l(t),e=w()},m(t,a){s&&s.m(t,a),$(t,e,a),n=!0},p(t,[n]){3&n&&(a=t[0].substring(1)===t[1]),a?s?(s.p(t,n),3&n&&d(s,1)):(s=K(t),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(x(),p(s,1,1,(()=>{s=null})),b())},i(t){n||(d(s),n=!0)},o(t){p(s),n=!1},d(t){s&&s.d(t),t&&i(e)}}}function G(t,e,n){let a,{$$slots:s={},$$scope:r}=e;const{path:o}=g("router");y(t,o,(t=>n(1,a=t)));let{path:l}=e;return t.$$set=t=>{"path"in t&&n(0,l=t.path),"$$scope"in t&&n(3,r=t.$$scope)},[l,a,o,r,s]}class Q extends t{constructor(t){super(),e(this,t,G,X,n,{path:0})}}function W(t){let e,n,g,v,w;const x=t[8].default,b=a(x,t,t[7],null);let y=[{class:n=t[4].class+" "+t[0]+" "+t[1].classNames+" text-roboto-variable text-variant-small text-weight-medium"},t[4]],C={};for(let t=0;t<y.length;t+=1)C=s(C,y[t]);return{c(){e=r("button"),b&&b.c(),this.h()},l(t){e=o(t,"BUTTON",{class:!0});var n=l(e);b&&b.l(n),n.forEach(i),this.h()},h(){c(e,C),u(e,"svelte-v3459l",!0)},m(n,a){$(n,e,a),b&&b.m(e,null),g=!0,v||(w=f(e,"click",t[3]),v=!0)},p(t,[a]){b&&b.p&&128&a&&m(b,x,t,t[7],a,null,null),c(e,C=h(y,[(!g||19&a&&n!==(n=t[4].class+" "+t[0]+" "+t[1].classNames+" text-roboto-variable text-variant-small text-weight-medium"))&&{class:n},16&a&&t[4]])),u(e,"svelte-v3459l",!0)},i(t){g||(d(b,t),g=!0)},o(t){p(b,t),g=!1},d(t){t&&i(e),b&&b.d(t),v=!1,w()}}}function tt(t,e,n){let a,{$$slots:r={},$$scope:o}=e;const{media:l}=g("media");y(t,l,(t=>n(1,a=t)));let i,{variant:c}=e,{onClick:u}=e;"primary"===c?i="button-variant-primary":"transparent"===c?i="button-variant-transparent":"secondary"===c&&(i="button-variant-secondary");return t.$$set=t=>{n(4,e=s(s({},e),v(t))),"variant"in t&&n(5,c=t.variant),"onClick"in t&&n(6,u=t.onClick),"$$scope"in t&&n(7,o=t.$$scope)},e=v(e),[i,a,l,()=>u(),e,c,u,o,r]}class et extends t{constructor(t){super(),e(this,t,tt,W,n,{variant:5,onClick:6})}}function nt(t){let e,n;return{c(){e=r("div"),n=C("One moment please..."),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=l(e);n=E(a,"One moment please..."),a.forEach(i),this.h()},h(){I(e,"class","text-roboto-mono text-variant-medium text-weight-medium svelte-1hptsjq")},m(t,a){$(t,e,a),H(e,n)},p:V,i:V,o:V,d(t){t&&i(e)}}}function at(t){let e,n,a,s,c,u,f,m;return{c(){e=r("div"),n=C("Your record might be cached. "),a=r("br"),s=C("\r\n      Please wait up to 1 minute or you can "),c=r("br"),u=k(),f=r("a"),m=C("recreate your identity here."),this.h()},l(t){e=o(t,"DIV",{class:!0});var r=l(e);n=E(r,"Your record might be cached. "),a=o(r,"BR",{}),s=E(r,"\r\n      Please wait up to 1 minute or you can "),c=o(r,"BR",{}),u=N(r),f=o(r,"A",{href:!0,class:!0});var $=l(f);m=E($,"recreate your identity here."),$.forEach(i),r.forEach(i),this.h()},h(){I(f,"href","/#/create"),I(f,"class","svelte-1hptsjq"),I(e,"class","text-roboto-mono text-variant-medium text-weight-medium svelte-1hptsjq")},m(t,r){$(t,e,r),H(e,n),H(e,a),H(e,s),H(e,c),H(e,u),H(e,f),H(f,m)},p:V,i:V,o:V,d(t){t&&i(e)}}}function st(t){let e,n,a,s;return n=new et({props:{variant:"primary",onClick:t[5],$$slots:{default:[rt]},$$scope:{ctx:t}}}),{c(){e=r("div"),T(n.$$.fragment),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=l(e);j(n.$$.fragment,a),a.forEach(i),this.h()},h(){I(e,"class",a="confirm "+t[2].classNames+" svelte-1hptsjq")},m(t,a){$(t,e,a),F(n,e,null),s=!0},p(t,r){const o={};4096&r&&(o.$$scope={dirty:r,ctx:t}),n.$set(o),(!s||4&r&&a!==(a="confirm "+t[2].classNames+" svelte-1hptsjq"))&&I(e,"class",a)},i(t){s||(d(n.$$.fragment,t),s=!0)},o(t){p(n.$$.fragment,t),s=!1},d(t){t&&i(e),A(n)}}}function rt(t){let e;return{c(){e=C("Continue")},l(t){e=E(t,"Continue")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function ot(t){let e,n,a,s,c,u,f;const m=[st,at,nt],h=[];function g(t,e){return t[0]?!0===t[1]?1:2:0}return c=g(t),u=h[c]=m[c](t),{c(){e=r("h1"),n=C("Log in"),a=k(),s=r("div"),u.c(),this.h()},l(t){e=o(t,"H1",{class:!0});var r=l(e);n=E(r,"Log in"),r.forEach(i),a=N(t),s=o(t,"DIV",{class:!0,style:!0});var c=l(s);u.l(c),c.forEach(i),this.h()},h(){I(e,"class","text-roboto-mono text-variant-huge text-weight-medium svelte-1hptsjq"),I(s,"class","container svelte-1hptsjq"),D(s,"display","flex"),D(s,"align-items","center"),D(s,"justify-content","space-between")},m(t,r){$(t,e,r),H(e,n),$(t,a,r),$(t,s,r),h[c].m(s,null),f=!0},p(t,[e]){let n=c;c=g(t),c===n?h[c].p(t,e):(x(),p(h[n],1,1,(()=>{h[n]=null})),b(),u=h[c],u?u.p(t,e):(u=h[c]=m[c](t),u.c()),d(u,1),u.m(s,null))},i(t){f||(d(u),f=!0)},o(t){p(u),f=!1},d(t){t&&i(e),t&&i(a),t&&i(s),h[c].d()}}}function lt(t){return new Promise((e=>setTimeout(e,t)))}function it(t,e,n){let a,s;const r=g("identities"),o=g("loading"),{media:l}=g("media");y(t,l,(t=>n(2,s=t)));const i=g("loginFlow"),c=i.loginFlowData;y(t,c,(t=>n(7,a=t)));const{goto:u}=g("router");let $=!1,f=!1,m=!0;L((()=>m=!1));return S((async()=>{if(!a.state)return void u("/list");let t;try{t=await r.credentialsFor(a.id,a.state)}catch(t){console.warn(t)}t||u("/create")})),[$,f,s,l,c,async()=>{n(0,$=!0),m=!0,o.start(),setTimeout((()=>{n(1,f=!0)}),15e3);const t=async()=>{const t=await r.credentialsFor(a.id,a.state),e=new URL(a.callbackUrl),n=await r.getPrefix(t.name),s={signed:btoa(t.signed),domain:btoa(t.name),deviceId:btoa(n),publicKey:btoa(t.publicKey)};e.hash=btoa(JSON.stringify(s)),i.clear(),window.location.href=e.toString()};for(;m;){if(await r.verifyFingerprintFor(a.id)){o.stop(),await t();break}await lt(2e3)}}]}class ct extends t{constructor(t){super(),e(this,t,it,ot,n,{})}}function ut(t){let e,n;return{c(){e=R("svg"),n=R("path"),this.h()},l(t){e=o(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var a=l(e);n=o(a,"path",{d:!0,fill:!0},1),l(n).forEach(i),a.forEach(i),this.h()},h(){I(n,"d","M10.4062 15.1875H10.9688C11.1094 15.1875 11.25 15.082 11.25 14.9062V5.34375C11.25 5.20312 11.1094 5.0625 10.9688 5.0625H10.4062C10.2305 5.0625 10.125 5.20312 10.125 5.34375V14.9062C10.125 15.082 10.2305 15.1875 10.4062 15.1875ZM4.78125 15.1875H5.34375C5.48438 15.1875 5.625 15.082 5.625 14.9062V5.34375C5.625 5.20312 5.48438 5.0625 5.34375 5.0625H4.78125C4.60547 5.0625 4.5 5.20312 4.5 5.34375V14.9062C4.5 15.082 4.60547 15.1875 4.78125 15.1875ZM15.4688 2.25H11.8125L10.6172 0.703125C10.3359 0.316406 9.73828 0 9.28125 0H6.46875C5.97656 0 5.37891 0.316406 5.09766 0.703125L3.9375 2.25H0.28125C0.105469 2.25 0 2.39062 0 2.53125V3.09375C0 3.26953 0.105469 3.375 0.28125 3.375H1.125V16.3125C1.125 17.2617 1.86328 18 2.8125 18H12.9375C13.8516 18 14.625 17.2617 14.625 16.3125V3.375H15.4688C15.6094 3.375 15.75 3.26953 15.75 3.09375V2.53125C15.75 2.39062 15.6094 2.25 15.4688 2.25ZM6.01172 1.37109C6.08203 1.23047 6.29297 1.16016 6.46875 1.125H9.28125C9.42188 1.16016 9.63281 1.23047 9.70312 1.37109L10.4062 2.25H5.34375L6.01172 1.37109ZM13.5 16.3125C13.5 16.6289 13.2188 16.875 12.9375 16.875H2.8125C2.49609 16.875 2.25 16.6289 2.25 16.3125V3.375H13.5V16.3125ZM7.59375 15.1875H8.15625C8.29688 15.1875 8.4375 15.082 8.4375 14.9062V5.34375C8.4375 5.20312 8.29688 5.0625 8.15625 5.0625H7.59375C7.41797 5.0625 7.3125 5.20312 7.3125 5.34375V14.9062C7.3125 15.082 7.41797 15.1875 7.59375 15.1875Z"),I(n,"fill","#676767"),I(e,"width","16"),I(e,"height","18"),I(e,"viewBox","0 0 16 18"),I(e,"fill","none"),I(e,"xmlns","http://www.w3.org/2000/svg")},m(t,a){$(t,e,a),H(e,n)},p:V,i:V,o:V,d(t){t&&i(e)}}}class $t extends t{constructor(t){super(),e(this,t,null,ut,n,{})}}
/*! https://mths.be/punycode v1.4.1 by @mathias */var ft=2147483647,mt=/^xn--/,ht=/[^\x20-\x7E]/,dt=/[\x2E\u3002\uFF0E\uFF61]/g,pt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gt=Math.floor,vt=String.fromCharCode;function wt(t){throw new RangeError(pt[t])}function xt(t,e){for(var n=t.length,a=[];n--;)a[n]=e(t[n]);return a}function bt(t,e){var n=t.split("@"),a="";return n.length>1&&(a=n[0]+"@",t=n[1]),a+xt((t=t.replace(dt,".")).split("."),e).join(".")}function yt(t){for(var e,n,a=[],s=0,r=t.length;s<r;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<r?56320==(64512&(n=t.charCodeAt(s++)))?a.push(((1023&e)<<10)+(1023&n)+65536):(a.push(e),s--):a.push(e);return a}function Ct(t){return xt(t,(function(t){var e="";return t>65535&&(e+=vt((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=vt(t)})).join("")}function kt(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function Et(t,e,n){var a=0;for(t=n?gt(t/700):t>>1,t+=gt(t/e);t>455;a+=36)t=gt(t/35);return gt(a+36*t/(t+38))}function Nt(t){var e,n,a,s,r,o,l,i,c,u,$,f=[],m=t.length,h=0,d=128,p=72;for((n=t.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)t.charCodeAt(a)>=128&&wt("not-basic"),f.push(t.charCodeAt(a));for(s=n>0?n+1:0;s<m;){for(r=h,o=1,l=36;s>=m&&wt("invalid-input"),((i=($=t.charCodeAt(s++))-48<10?$-22:$-65<26?$-65:$-97<26?$-97:36)>=36||i>gt((ft-h)/o))&&wt("overflow"),h+=i*o,!(i<(c=l<=p?1:l>=p+26?26:l-p));l+=36)o>gt(ft/(u=36-c))&&wt("overflow"),o*=u;p=Et(h-r,e=f.length+1,0==r),gt(h/e)>ft-d&&wt("overflow"),d+=gt(h/e),h%=e,f.splice(h++,0,d)}return Ct(f)}function It(t){var e,n,a,s,r,o,l,i,c,u,$,f,m,h,d,p=[];for(f=(t=yt(t)).length,e=128,n=0,r=72,o=0;o<f;++o)($=t[o])<128&&p.push(vt($));for(a=s=p.length,s&&p.push("-");a<f;){for(l=ft,o=0;o<f;++o)($=t[o])>=e&&$<l&&(l=$);for(l-e>gt((ft-n)/(m=a+1))&&wt("overflow"),n+=(l-e)*m,e=l,o=0;o<f;++o)if(($=t[o])<e&&++n>ft&&wt("overflow"),$==e){for(i=n,c=36;!(i<(u=c<=r?1:c>=r+26?26:c-r));c+=36)d=i-u,h=36-u,p.push(vt(kt(u+d%h,0))),i=gt(d/h);p.push(vt(kt(i,0))),r=Et(n,m,a==s),n=0,++a}++n,++e}return p.join("")}var Dt={version:"1.4.1",ucs2:{decode:yt,encode:Ct},toASCII:function(t){return bt(t,(function(t){return ht.test(t)?"xn--"+It(t):t}))},toUnicode:function(t){return bt(t,(function(t){return mt.test(t)?Nt(t.slice(4).toLowerCase()):t}))},encode:It,decode:Nt};function Ht(t){let e,n=Lt(t[0])+"";return{c(){e=C(n)},l(t){e=E(t,n)},m(t,n){$(t,e,n)},p(t,[a]){1&a&&n!==(n=Lt(t[0])+"")&&M(e,n)},i:V,o:V,d(t){t&&i(e)}}}const Lt=(t="")=>{const e=[];let n=!1;return t.split(".").forEach((t=>{try{const a=Dt.toUnicode(t);t!==a?(n=!0,e.push(a)):e.push(t)}catch(n){e.push(t)}})),n?`${t}/ (${e.join(".")})`:`${t}/`};function St(t,e,n){let{domainName:a}=e;return t.$$set=t=>{"domainName"in t&&n(0,a=t.domainName)},[a]}class Vt extends t{constructor(t){super(),e(this,t,St,Ht,n,{domainName:0})}}function Tt(t){let e,n,a;return{c(){e=R("svg"),n=R("path"),a=R("path"),this.h()},l(t){e=o(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var s=l(e);n=o(s,"path",{d:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0},1),l(n).forEach(i),a=o(s,"path",{d:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0},1),l(a).forEach(i),s.forEach(i),this.h()},h(){I(n,"d","M10 8L6 12L10 16"),I(n,"stroke","white"),I(n,"stroke-linecap","round"),I(n,"stroke-linejoin","round"),I(a,"d","M6.86407 11.9719L18.2489 11.9719"),I(a,"stroke","white"),I(a,"stroke-linecap","round"),I(a,"stroke-linejoin","round"),I(e,"width","24"),I(e,"height","24"),I(e,"viewBox","0 0 24 24"),I(e,"fill","none"),I(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){$(t,e,s),H(e,n),H(e,a)},p:V,i:V,o:V,d(t){t&&i(e)}}}class jt extends t{constructor(t){super(),e(this,t,null,Tt,n,{})}}function Ft(t,e,n){const a=t.slice();return a[18]=e[n],a}function At(t){let e,n;return e=new jt({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Rt(t){let e,n,a,s,c;function u(){return t[10](t[18])}return n=new Vt({props:{domainName:t[18].name}}),{c(){e=r("div"),T(n.$$.fragment),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=l(e);j(n.$$.fragment,a),a.forEach(i),this.h()},h(){I(e,"class","existing-link color-white hover-color-brand text-roboto-variable text-variant-small text-weight-medium")},m(t,r){$(t,e,r),F(n,e,null),a=!0,s||(c=f(e,"click",u),s=!0)},p(e,a){t=e;const s={};1&a&&(s.domainName=t[18].name),n.$set(s)},i(t){a||(d(n.$$.fragment,t),a=!0)},o(t){p(n.$$.fragment,t),a=!1},d(t){t&&i(e),A(n),s=!1,c()}}}function Mt(t){let e,n,a,s,c;function u(){return t[9](t[18])}return n=new Vt({props:{domainName:t[18].name}}),{c(){e=r("div"),T(n.$$.fragment),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=l(e);j(n.$$.fragment,a),a.forEach(i),this.h()},h(){I(e,"class","color-white text-roboto-variable text-variant-small text-weight-medium")},m(t,r){$(t,e,r),F(n,e,null),a=!0,s||(c=f(e,"click",u),s=!0)},p(e,a){t=e;const s={};1&a&&(s.domainName=t[18].name),n.$set(s)},i(t){a||(d(n.$$.fragment,t),a=!0)},o(t){p(n.$$.fragment,t),a=!1},d(t){t&&i(e),A(n),s=!1,c()}}}function Ot(t){let e,n;return e=new $t({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Pt(t){let e,n,a,s,c,u;const f=[Mt,Rt],m=[];function h(t,e){return t[1]?.state?1:0}function g(){return t[11](t[18])}return n=h(t),a=m[n]=f[n](t),c=new et({props:{class:"delete-button",variant:"transparent",onClick:g,$$slots:{default:[Ot]},$$scope:{ctx:t}}}),{c(){e=r("li"),a.c(),s=k(),T(c.$$.fragment),this.h()},l(t){e=o(t,"LI",{class:!0});var n=l(e);a.l(n),s=N(n),j(c.$$.fragment,n),n.forEach(i),this.h()},h(){I(e,"class","svelte-1865il7")},m(t,a){$(t,e,a),m[n].m(e,null),H(e,s),F(c,e,null),u=!0},p(r,o){let l=n;n=h(t=r),n===l?m[n].p(t,o):(x(),p(m[l],1,1,(()=>{m[l]=null})),b(),a=m[n],a?a.p(t,o):(a=m[n]=f[n](t),a.c()),d(a,1),a.m(e,s));const i={};1&o&&(i.onClick=g),2097152&o&&(i.$$scope={dirty:o,ctx:t}),c.$set(i)},i(t){u||(d(a),d(c.$$.fragment,t),u=!0)},o(t){p(a),p(c.$$.fragment,t),u=!1},d(t){t&&i(e),m[n].d(),A(c)}}}function Ut(t){let e,n="ï¼‹    Setup another identity";return{c(){e=C(n)},l(t){e=E(t,n)},m(t,n){$(t,e,n)},p:V,d(t){t&&i(e)}}}function _t(t){let e,n,a,s,c,u,f,m,h,g;e=new et({props:{onClick:t[8],style:"position: absolute; top: -8px; left: 8px;",variant:"transparent",$$slots:{default:[At]},$$scope:{ctx:t}}});let v=t[0],w=[];for(let e=0;e<v.length;e+=1)w[e]=Pt(Ft(t,v,e));const y=t=>p(w[t],1,1,(()=>{w[t]=null}));return h=new et({props:{class:"color-white hover-color-brand text-roboto-variable text-variant-small text-weight-medium",onClick:t[12],$$slots:{default:[Ut]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment),n=k(),a=r("h1"),s=C("Your identities"),c=k(),u=r("ul");for(let t=0;t<w.length;t+=1)w[t].c();f=k(),m=r("li"),T(h.$$.fragment),this.h()},l(t){j(e.$$.fragment,t),n=N(t),a=o(t,"H1",{class:!0});var r=l(a);s=E(r,"Your identities"),r.forEach(i),c=N(t),u=o(t,"UL",{class:!0});var $=l(u);for(let t=0;t<w.length;t+=1)w[t].l($);f=N($),m=o($,"LI",{class:!0});var d=l(m);j(h.$$.fragment,d),d.forEach(i),$.forEach(i),this.h()},h(){I(a,"class","text-roboto-mono text-variant-huge text-weight-medium svelte-1865il7"),I(m,"class","svelte-1865il7"),I(u,"class","svelte-1865il7")},m(t,r){F(e,t,r),$(t,n,r),$(t,a,r),H(a,s),$(t,c,r),$(t,u,r);for(let t=0;t<w.length;t+=1)w[t].m(u,null);H(u,f),H(u,m),F(h,m,null),g=!0},p(t,[n]){const a={};if(2097152&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a),115&n){let e;for(v=t[0],e=0;e<v.length;e+=1){const a=Ft(t,v,e);w[e]?(w[e].p(a,n),d(w[e],1)):(w[e]=Pt(a),w[e].c(),d(w[e],1),w[e].m(u,f))}for(x(),e=v.length;e<w.length;e+=1)y(e);b()}const s={};2097152&n&&(s.$$scope={dirty:n,ctx:t}),h.$set(s)},i(t){if(!g){d(e.$$.fragment,t);for(let t=0;t<v.length;t+=1)d(w[t]);d(h.$$.fragment,t),g=!0}},o(t){p(e.$$.fragment,t),w=w.filter(Boolean);for(let t=0;t<w.length;t+=1)p(w[t]);p(h.$$.fragment,t),g=!1},d(t){A(e,t),t&&i(n),t&&i(a),t&&i(c),t&&i(u),O(w,t),A(h)}}}function Bt(t,e,n){let a,s;const r=g("loginFlow"),o=r.loginFlowData;y(t,o,(t=>n(1,s=t)));const{deviceId:l}=g("media"),{goto:i}=g("router"),{delete:c,list:u,credentialsFor:$}=g("identities");y(t,u,(t=>n(0,a=t)));const f=t=>{window.confirm("Would you like to delete this identity? You will still be able to use this name again later.")&&c(t)},m=async t=>{const e=`${t.name}`.split(".");e.pop();const n=[{host:[l,"_auth",...e].join("."),ttl:60,type:"TXT",value:`v=0;fingerprint=${t.fingerprint}`}];navigator.clipboard.writeText(JSON.stringify(n))},h=async t=>{r.setName(t),i("/#/login")},d=()=>{r.clearName(),i("/#/create")};return[a,s,o,u,f,m,h,d,()=>window.history.back(),t=>m(t),t=>h(t.name),t=>f(t.name),()=>d()]}class qt extends t{constructor(t){super(),e(this,t,Bt,_t,n,{})}}function Yt(t){let e,n,a,l=[{class:"textinput text-variant-small text-roboto-variable color-white"},t[1]],m={};for(let t=0;t<l.length;t+=1)m=s(m,l[t]);return{c(){e=r("input"),this.h()},l(t){e=o(t,"INPUT",{class:!0}),this.h()},h(){c(e,m),u(e,"svelte-1kz53kh",!0)},m(s,r){$(s,e,r),P(e,t[0]),n||(a=f(e,"input",t[2]),n=!0)},p(t,[n]){c(e,m=h(l,[{class:"textinput text-variant-small text-roboto-variable color-white"},2&n&&t[1]])),1&n&&e.value!==t[0]&&P(e,t[0]),u(e,"svelte-1kz53kh",!0)},i:V,o:V,d(t){t&&i(e),n=!1,a()}}}function Zt(t,e,n){let{value:a=""}=e;return t.$$set=t=>{n(1,e=s(s({},e),v(t))),"value"in t&&n(0,a=t.value)},e=v(e),[a,e,function(){a=this.value,n(0,a)}]}class Jt extends t{constructor(t){super(),e(this,t,Zt,Yt,n,{value:0})}}function zt(t){let e,n;return e=new z({props:{class:"list-link text-roboto-variable text-variant-tiny text-weight-medium",to:"/list",$$slots:{default:[Kt]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function Kt(t){let e;return{c(){e=C("Select a different identity")},l(t){e=E(t,"Select a different identity")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function Xt(t){let e,n,a,s,c,u,f,m,h,g,v,w,y,D,L,S,V,R,M,O,P,U,_;n=new Vt({props:{domainName:t[4]}}),c=new et({props:{variant:"primary",onClick:t[11],disabled:t[2],$$slots:{default:[Qt]},$$scope:{ctx:t}}});const B=[te,Wt],q=[];function Y(t,e){return t[5]?0:1}return O=Y(t),P=q[O]=B[O](t),{c(){e=r("div"),T(n.$$.fragment),a=k(),s=r("div"),T(c.$$.fragment),f=k(),m=r("div"),h=r("p"),g=C("Handshake name not in Namebase?"),v=k(),w=r("p"),y=C("See our "),D=r("a"),L=C("instructions for setting the record outside of Namebase."),S=k(),V=r("p"),R=C("Click the button below to copy your record, then click it again after you have set it."),M=k(),P.c(),this.h()},l(t){e=o(t,"DIV",{class:!0});var r=l(e);j(n.$$.fragment,r),r.forEach(i),a=N(t),s=o(t,"DIV",{class:!0});var u=l(s);j(c.$$.fragment,u),u.forEach(i),f=N(t),m=o(t,"DIV",{class:!0});var $=l(m);h=o($,"P",{class:!0});var d=l(h);g=E(d,"Handshake name not in Namebase?"),d.forEach(i),v=N($),w=o($,"P",{class:!0});var p=l(w);y=E(p,"See our "),D=o(p,"A",{rel:!0,href:!0,class:!0,target:!0});var x=l(D);L=E(x,"instructions for setting the record outside of Namebase."),x.forEach(i),p.forEach(i),S=N($),V=o($,"P",{class:!0});var b=l(V);R=E(b,"Click the button below to copy your record, then click it again after you have set it."),b.forEach(i),M=N($),P.l($),$.forEach(i),this.h()},h(){I(e,"class","input text-variant-small text-roboto-variable text-weight-regular svelte-1fcbh1l"),I(s,"class",u="continue to-namebase "+t[6].classNames+" svelte-1fcbh1l"),I(h,"class","text-variant-regular text-roboto-variable text-weight-medium svelte-1fcbh1l"),I(D,"rel","noopener noreferrer"),I(D,"href","https://docs.namebase.io/handshake-login/using-handshake-login"),I(D,"class","text-weight-medium svelte-1fcbh1l"),I(D,"target","_blank"),I(w,"class","text-variant-tiny text-roboto-variable text-weight-regular  svelte-1fcbh1l"),I(V,"class","text-variant-tiny text-roboto-variable text-weight-regular svelte-1fcbh1l"),I(m,"class",U="set-manually "+t[6].classNames+" svelte-1fcbh1l")},m(t,r){$(t,e,r),F(n,e,null),$(t,a,r),$(t,s,r),F(c,s,null),$(t,f,r),$(t,m,r),H(m,h),H(h,g),H(m,v),H(m,w),H(w,y),H(w,D),H(D,L),H(m,S),H(m,V),H(V,R),H(m,M),q[O].m(m,null),_=!0},p(t,e){const a={};16&e&&(a.domainName=t[4]),n.$set(a);const r={};4&e&&(r.disabled=t[2]),2097152&e&&(r.$$scope={dirty:e,ctx:t}),c.$set(r),(!_||64&e&&u!==(u="continue to-namebase "+t[6].classNames+" svelte-1fcbh1l"))&&I(s,"class",u);let o=O;O=Y(t),O===o?q[O].p(t,e):(x(),p(q[o],1,1,(()=>{q[o]=null})),b(),P=q[O],P?P.p(t,e):(P=q[O]=B[O](t),P.c()),d(P,1),P.m(m,null)),(!_||64&e&&U!==(U="set-manually "+t[6].classNames+" svelte-1fcbh1l"))&&I(m,"class",U)},i(t){_||(d(n.$$.fragment,t),d(c.$$.fragment,t),d(P),_=!0)},o(t){p(n.$$.fragment,t),p(c.$$.fragment,t),p(P),_=!1},d(t){t&&i(e),A(n),t&&i(a),t&&i(s),A(c),t&&i(f),t&&i(m),q[O].d()}}}function Gt(t){let e,n,a,s,c,u,f,m;function h(e){t[14](e)}let g={id:"new-id",name:"new-id",placeholder:"Enter a Handshake name that you own*"};return void 0!==t[4]&&(g.value=t[4]),n=new Jt({props:g}),U.push((()=>_(n,"value",h))),u=new et({props:{variant:"primary",onClick:t[15],disabled:!t[4],$$slots:{default:[ae]},$$scope:{ctx:t}}}),{c(){e=r("div"),T(n.$$.fragment),s=k(),c=r("div"),T(u.$$.fragment),this.h()},l(t){e=o(t,"DIV",{class:!0});var a=l(e);j(n.$$.fragment,a),a.forEach(i),s=N(t),c=o(t,"DIV",{class:!0});var r=l(c);j(u.$$.fragment,r),r.forEach(i),this.h()},h(){I(e,"class","input svelte-1fcbh1l"),I(c,"class",f="continue to-confirm "+t[6].classNames+" svelte-1fcbh1l")},m(t,a){$(t,e,a),F(n,e,null),$(t,s,a),$(t,c,a),F(u,c,null),m=!0},p(t,e){const s={};!a&&16&e&&(a=!0,s.value=t[4],B((()=>a=!1))),n.$set(s);const r={};16&e&&(r.disabled=!t[4]),2097152&e&&(r.$$scope={dirty:e,ctx:t}),u.$set(r),(!m||64&e&&f!==(f="continue to-confirm "+t[6].classNames+" svelte-1fcbh1l"))&&I(c,"class",f)},i(t){m||(d(n.$$.fragment,t),d(u.$$.fragment,t),m=!0)},o(t){p(n.$$.fragment,t),p(u.$$.fragment,t),m=!1},d(t){t&&i(e),A(n),t&&i(s),t&&i(c),A(u)}}}function Qt(t){let e;return{c(){e=C("Continue to Namebase")},l(t){e=E(t,"Continue to Namebase")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function Wt(t){let e,n;return e=new et({props:{onClick:t[13],variant:"secondary",disabled:t[2],$$slots:{default:[ee]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},p(t,n){const a={};4&n&&(a.disabled=t[2]),2097152&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function te(t){let e,n;return e=new et({props:{onClick:t[12],variant:"secondary",disabled:t[2],$$slots:{default:[ne]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},p(t,n){const a={};4&n&&(a.disabled=t[2]),2097152&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function ee(t){let e;return{c(){e=C("Copy my record")},l(t){e=E(t,"Copy my record")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function ne(t){let e;return{c(){e=C("I set my record")},l(t){e=E(t,"I set my record")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function ae(t){let e;return{c(){e=C("Continue")},l(t){e=E(t,"Continue")},m(t,n){$(t,e,n)},d(t){t&&i(e)}}}function se(t){let e,n,a,s,c,u,f,m,h,g,v,y,L=t[0].length&&!t[3]&&zt(t);const S=[Gt,Xt],V=[];function T(t,e){return t[1]===re.ENTER_DETAILS?0:t[1]===re.CONFIRM_DETAILS?1:-1}return~(h=T(t))&&(g=V[h]=S[h](t)),{c(){e=r("h1"),n=C("Set up a new identity"),a=k(),s=r("div"),c=r("label"),u=C("Your Handshake name"),f=k(),L&&L.c(),m=k(),g&&g.c(),v=w(),this.h()},l(t){e=o(t,"H1",{class:!0});var r=l(e);n=E(r,"Set up a new identity"),r.forEach(i),a=N(t),s=o(t,"DIV",{style:!0});var $=l(s);c=o($,"LABEL",{for:!0,class:!0});var h=l(c);u=E(h,"Your Handshake name"),h.forEach(i),f=N($),L&&L.l($),$.forEach(i),m=N(t),g&&g.l(t),v=w(),this.h()},h(){I(e,"class","text-roboto-mono text-variant-huge text-weight-medium svelte-1fcbh1l"),I(c,"for","new-id"),I(c,"class","text-roboto-mono text-variant-small text-weight-medium svelte-1fcbh1l"),D(s,"display","flex"),D(s,"align-items","center"),D(s,"justify-content","space-between")},m(t,r){$(t,e,r),H(e,n),$(t,a,r),$(t,s,r),H(s,c),H(c,u),H(s,f),L&&L.m(s,null),$(t,m,r),~h&&V[h].m(t,r),$(t,v,r),y=!0},p(t,[e]){t[0].length&&!t[3]?L?9&e&&d(L,1):(L=zt(t),L.c(),d(L,1),L.m(s,null)):L&&(x(),p(L,1,1,(()=>{L=null})),b());let n=h;h=T(t),h===n?~h&&V[h].p(t,e):(g&&(x(),p(V[n],1,1,(()=>{V[n]=null})),b()),~h?(g=V[h],g?g.p(t,e):(g=V[h]=S[h](t),g.c()),d(g,1),g.m(v.parentNode,v)):g=null)},i(t){y||(d(L),d(g),y=!0)},o(t){p(L),p(g),y=!1},d(t){t&&i(e),t&&i(a),t&&i(s),L&&L.d(),t&&i(m),~h&&V[h].d(t),t&&i(v)}}}var re;!function(t){t.ENTER_DETAILS="enterDetails",t.CONFIRM_DETAILS="confirmDetails"}(re||(re={}));const oe=t=>t.toLowerCase().substring(0,63).replace(/[^a-z0-9-_\.]+/g,"").replace(/^[-_]+/g,"").replace(/[-_]+$/g,"");function le(t,e,n){let a,s,r;const o=g("loginFlow"),l=g("loading"),i=g("identities"),{media:c}=g("media");y(t,c,(t=>n(6,r=t)));const u=o.loginFlowData;y(t,u,(t=>n(16,a=t)));let{list:$}=i;y(t,$,(t=>n(0,s=t)));let f=re.ENTER_DETAILS,m=!1,h=!0,d=a.id,p=!1;S((()=>{a.id&&(n(4,d=a.id),v())}));const v=async()=>{o.setName(oe(d)),n(1,f=re.CONFIRM_DETAILS)},w=(t,e,n)=>{let a=`${window.location.protocol}//${window.location.host}/#/login?id=${btoa(t)}`;return e&&(a+=`&state=${btoa(e)}`),n&&(a+=`&callbackUrl=${btoa(n)}`),a.toString()};return t.$$.update=()=>{1&t.$$.dirty&&0!==s.length&&n(3,h=!1)},[s,f,m,h,d,p,r,c,u,$,v,async()=>{n(2,m=!0),l.start();const t=await i.generate(a.id),e=`${t.name}`.split("."),s=e.pop(),r=[{host:[await i.getPrefix(t.name),"_auth",...e].join("."),ttl:5,type:"TXT",value:`v=0;fingerprint=${t.fingerprint}`}],o=new URL(`${window.baseDomain||"https://www.namebase.io"}/next/domain-manager/${s}/records`),c=w(a.id,a.state,a.callbackUrl),u=encodeURIComponent(encodeURIComponent(c.toString()));o.searchParams.append("records",btoa(JSON.stringify(r))),o.searchParams.append("redirect",u),l.stop(),window.location.href=o.toString()},async()=>{const t=w(a.id,a.state,a.callbackUrl);window.location.href=t.toString()},async()=>{const t=await i.generate(oe(d));n(5,p=!0);const e=`${t.name}`.split(".");e.pop();const a=[{host:[await i.getPrefix(t.name),"_auth",...e].join("."),ttl:60,type:"TXT",value:`v=0;fingerprint=${t.fingerprint}`}];navigator.clipboard.writeText(JSON.stringify(a))},function(t){d=t,n(4,d)},()=>v()]}class ie extends t{constructor(t){super(),e(this,t,le,se,n,{})}}function ce(t){let e,n;return e=new ct({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function ue(t){let e,n;return e=new ie({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function $e(t){let e,n;return e=new qt({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function fe(t){let e,n;return e=new qt({}),{c(){T(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,a){F(e,t,a),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){p(e.$$.fragment,t),n=!1},d(t){A(e,t)}}}function me(t){let e,n,a,s,r,o,l,c;return e=new Q({props:{path:"/login",$$slots:{default:[ce]},$$scope:{ctx:t}}}),a=new Q({props:{path:"/create",$$slots:{default:[ue]},$$scope:{ctx:t}}}),r=new Q({props:{path:"/list",$$slots:{default:[$e]},$$scope:{ctx:t}}}),l=new Q({props:{path:"/",$$slots:{default:[fe]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment),n=k(),T(a.$$.fragment),s=k(),T(r.$$.fragment),o=k(),T(l.$$.fragment)},l(t){j(e.$$.fragment,t),n=N(t),j(a.$$.fragment,t),s=N(t),j(r.$$.fragment,t),o=N(t),j(l.$$.fragment,t)},m(t,i){F(e,t,i),$(t,n,i),F(a,t,i),$(t,s,i),F(r,t,i),$(t,o,i),F(l,t,i),c=!0},p(t,n){const s={};1&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s);const o={};1&n&&(o.$$scope={dirty:n,ctx:t}),a.$set(o);const i={};1&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i);const c={};1&n&&(c.$$scope={dirty:n,ctx:t}),l.$set(c)},i(t){c||(d(e.$$.fragment,t),d(a.$$.fragment,t),d(r.$$.fragment,t),d(l.$$.fragment,t),c=!0)},o(t){p(e.$$.fragment,t),p(a.$$.fragment,t),p(r.$$.fragment,t),p(l.$$.fragment,t),c=!1},d(t){A(e,t),t&&i(n),A(a,t),t&&i(s),A(r,t),t&&i(o),A(l,t)}}}function he(t){let e,n,a;return n=new q({props:{default:"/list",$$slots:{default:[me]},$$scope:{ctx:t}}}),{c(){e=k(),T(n.$$.fragment),this.h()},l(t){Y('[data-svelte="svelte-1d0c6b9"]',document.head).forEach(i),e=N(t),j(n.$$.fragment,t),this.h()},h(){document.title="Login with Handshake | Namebase"},m(t,s){$(t,e,s),F(n,t,s),a=!0},p(t,[e]){const a={};1&e&&(a.$$scope={dirty:e,ctx:t}),n.$set(a)},i(t){a||(d(n.$$.fragment,t),a=!0)},o(t){p(n.$$.fragment,t),a=!1},d(t){t&&i(e),A(n,t)}}}function de(t){return S((async()=>{})),[]}export default class extends t{constructor(t){super(),e(this,t,de,he,n,{})}}
