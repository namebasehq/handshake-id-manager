import{S as t,i as a,s as e,m as n,a as o,n as i,p as s,c as r,b as c,z as p,f as l,A as d,B as u,C as h,r as m,D as w,o as f}from"./client.864e10a4.js";import{i as y}from"./IdentityService.d5ae1877.js";function v(t){let a,e,f,y,v,g;return{c(){a=n("div"),e=n("input"),f=o(),y=n("input"),this.h()},l(t){a=i(t,"DIV",{});var n=s(a);e=i(n,"INPUT",{type:!0,placeholder:!0}),f=r(n),y=i(n,"INPUT",{type:!0,value:!0}),n.forEach(c),this.h()},h(){p(e,"type","text"),p(e,"placeholder","Enter your name"),p(y,"type","button"),y.value="Continue"},m(n,o){l(n,a,o),d(a,e),u(e,t[0]),d(a,f),d(a,y),v||(g=[h(e,"input",t[2]),h(y,"click",t[1])],v=!0)},p(t,[a]){1&a&&e.value!==t[0]&&u(e,t[0])},i:m,o:m,d(t){t&&c(a),v=!1,w(g)}}}function g(t,a,e){let n="";f((async()=>{}));return[n,async()=>{const t=await y.generateIndentity(n),a=t.name.split("."),e=a.pop(),o=[{type:"TXT",host:["_auth",...a].join("."),value:"authv=0;fingerprint="+t.fingerprint,ttl:60}],i=window.location.protocol+"//"+window.location.host+"/#/login?id="+btoa(t.name),s=new URL(`${window.baseDomain||"https://www.namebase.io"}/next/domain-manager/${e}/records`);s.searchParams.append("records",btoa(JSON.stringify(o))),s.searchParams.append("redirect",encodeURIComponent(encodeURIComponent(i.toString()))),window.location.href=s.toString()},function(){n=this.value,e(0,n)}]}export default class extends t{constructor(t){super(),a(this,t,g,v,e,{})}}
