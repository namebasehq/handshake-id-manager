import{_ as t,a as n,b as e,c as r,i as a,e as o,S as c,s as i,v as s,f as u,x as f,y as p,j as l,h,E as d,k as v,F as m,G as y,H as w,l as g,z as b,I as x,p as I,J as R,K as S}from"./client.d312b5fc.js";import{_ as P,i as U}from"./IdentityService.15ab6cfa.js";function j(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,o=n(t);if(r){var c=n(this).constructor;a=Reflect.construct(o,arguments,c)}else a=o.apply(this,arguments);return e(this,a)}}function k(t){var n,e,r,a,o,c;return{c:function(){n=s("div"),e=s("input"),r=u(),a=s("input"),this.h()},l:function(t){n=f(t,"DIV",{});var o=p(n);e=f(o,"INPUT",{type:!0,placeholder:!0}),r=l(o),a=f(o,"INPUT",{type:!0,value:!0}),o.forEach(h),this.h()},h:function(){d(e,"type","text"),d(e,"placeholder","Enter your name"),d(a,"type","button"),a.value="Continue"},m:function(i,s){v(i,n,s),m(n,e),y(e,t[0]),m(n,r),m(n,a),o||(c=[w(e,"input",t[2]),w(a,"click",t[1])],o=!0)},p:function(t,n){1&g(n,1)[0]&&e.value!==t[0]&&y(e,t[0])},i:b,o:b,d:function(t){t&&h(n),o=!1,x(c)}}}function D(t,n,e){var r="";return I(P(R.mark((function t(){return R.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))),[r,function(){var t=P(R.mark((function t(){var n,e,a,o,c,i,s,u;return R.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){return window.baseDomain||"https://www.namebase.io"},t.next=3,U.generateIndentity(r);case 3:e=t.sent,a=e.name.split("."),o=a.pop(),c=["_auth"].concat(S(a)).join("."),i=[{type:"TXT",host:c,value:"authv=0;fingerprint="+e.fingerprint,ttl:60}],s=window.location.protocol+"//"+window.location.host+"/#/login?id="+btoa(e.name),(u=new URL("".concat(n(),"/next/domain-manager/").concat(o,"/records"))).searchParams.append("records",btoa(JSON.stringify(i))),u.searchParams.append("redirect",encodeURIComponent(encodeURIComponent(s.toString()))),window.location.href=u.toString();case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),function(){r=this.value,e(0,r)}]}var T=function(n){t(s,c);var e=j(s);function s(t){var n;return r(this,s),n=e.call(this),a(o(n),t,D,k,i,{}),n}return s}();export default T;
