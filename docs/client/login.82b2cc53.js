import{S as t,i as e,s as a,m as n,E as i,n as s,p as r,F as o,b as u,f as d,A as c,G as m,r as p,o as b}from"./client.864e10a4.js";import{i as l}from"./IdentityService.d5ae1877.js";function y(t){let e,a,b=JSON.stringify(t[0])+"";return{c(){e=n("div"),a=i(b)},l(t){e=s(t,"DIV",{});var n=r(e);a=o(n,b),n.forEach(u)},m(t,n){d(t,e,n),c(e,a)},p(t,[e]){1&e&&b!==(b=JSON.stringify(t[0])+"")&&m(a,b)},i:p,o:p,d(t){t&&u(e)}}}function f(t,e,a){let{query:n}=e;return b((async()=>{HTMLFormElement.prototype.addInput=function(t,e){const a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",t),a.setAttribute("value",e),this.appendChild(a)};const t=await l.signAndGetpublicKey(atob(n.id),atob(n.state)),e=document.getElementsByTagName("body")[0],a=document.createElement("form"),i=new URL(atob(n.referrer));i.pathname=atob(n.action),a.setAttribute("action",i.toString()),a.setAttribute("method","POST"),a.setAttribute("enctype","multipart/form-data"),a.addInput("publicKey",btoa(t.publicKey)),a.addInput("signed",btoa(t.signed)),a.addInput("domain",btoa(t.name)),e.appendChild(a),a.submit()})),t.$$set=t=>{"query"in t&&a(0,n=t.query)},[n]}export default class extends t{constructor(t){super(),e(this,t,f,y,a,{query:0})}}
